<!-- views/pages/about.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
	<% include ../partials/head %>
</head>
<body>
	<header>
		<!-- < % include ../partials/header % > -->
		<% include ../partials/header_WebSiteStyle %>
	</header>

	<main>
	<div class="container">
	<p class="pull-right"><span class="label label-success"><%= process.env.version %></span></p>
	
	<div class="section" id="content">
		<h3>Check if a New House Name is Acceptable</h3>
		<div>
			<div class="row">
				<div class="col-md-12">
					<p>Use this page to check if your desired house name is acceptable.</p>
				</div>
			</div>
		</div>
		<hr>
		
	<!--angular app-->
    <div class="container-fluid" ng-app="app" ng-controller="appCtrl">
      <!--show postcode search-->
      <div ng-show="selectedAddress.data.length == 0">
        <h3>Search for your existing property</h3>
        <p>Type postcode and hit search</p>
        <form ng-submit="addressSearch()">
          <div class="form-group">
            <div class="input-group">
              <input type="text" name="searchValue" ng-model="searchValue" class="form-control" placeholder="Search by postcode">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-primary">Search</button>
              </span>
            </div>
          </div>
		<div ng-show="results.statusCode!=200">
			<h3><label class="{{results.messageClass}}">Error {{results.statusCode}}: {{results.message}}</label></h3>
		</div>
        </form>
      </div>
      
      <!--show results.data -->
      <div ng-show="results.data.length > 0" style="display:block;">
        <h3>Select Your Property</h3>
        <p>Select from the list or retry the search</p>
        <a style="display:block; cursor:pointer;" ng-repeat="x in results.data" ng-click="selectAddress(x)">{{x.property}}, {{x.street}}, {{x.postcode}}</a>
    	  <!-- <pre>{{results.data | json}}</pre> -->
      </div>  
      
      <!--show selected address-->
      <div ng-show="selectedAddress.data.length > 0" style="display:block;">
        <h3>Your Property</h3>
        <h3 ng-repeat="x in selectedAddress.data"><label class="label label-default">{{x.property}}, {{x.street}}, {{x.postcode}}</label></h3>
    	  <!-- <pre>{{selectedAddress.data | json}}</pre> -->
      </div>
    
      <!--show house name checker search-->
      <div ng-show="selectedAddress.data.length > 0 "> <!-- && hasNewHouseNameBeenChecked === 'false' -->
        <h3>Check your new House Name</h3>
        <p>Type your new house name and hit check button to test if it is acceptable</p>
        <form ng-submit="newHouseNameCheck()">
          <div class="form-group">
            <div class="input-group">
              <input type="text" name="newHouseName" ng-model="newHouseName" class="form-control" placeholder="Type your new house name">
              <span class="input-group-btn">
                <button type="submit" class="btn btn-primary">Check Name</button>
              </span>
            </div>
          </div>
        </form>
      </div>
      
	  <div class="loader" ng-show="loading===true"></div>
	  <div ng-show="hasNewHouseNameBeenChecked===true && loading===false">
        <h3>Rule results</h3>
        <p>See which rules have passed or failed</p>
		<div class="container-fluid">
			<table class="table table-striped table-bordered">
				<tr>
					<th>Rule</th>
					<th>Status</th>
					<th>Example</th>
				</tr>
				<tr>
					<td>Identical Names in Same Street</td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInUSRN.length"><h3><span class="label label-danger">Fail</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInUSRN.length === 0"><h3><span class="label label-success">Pass</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInUSRN.length"><pre>{{nameCheckResponse.data.nameChecks.identicalNameInUSRN | json}}</pre></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInUSRN.length === 0"></td>
				</tr>
				<tr>
					<td>Identical Names in Same Postcode Sector</td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInPostcodeSector.length"><h3><span class="label label-danger">Fail</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInPostcodeSector.length === 0"><h3><span class="label label-success">Pass</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInPostcodeSector.length"><pre>{{nameCheckResponse.data.nameChecks.identicalNameInPostcodeSector | json}}</pre></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalNameInPostcodeSector.length === 0"></td>
				</tr>
				<tr>
					<td>Similar Sounding Names in Same Street</td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInUSRN.length"><h3><span class="label label-danger">Fail</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInUSRN.length === 0"><h3><span class="label label-success">Pass</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInUSRN.length"><pre>{{nameCheckResponse.data.nameChecks.identicalSoundingNameInUSRN | json}}</pre></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInUSRN.length === 0"></td>
				</tr>
				<tr>
					<td>Similar Sounding Names Same Postcode Sector</td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInPostcodeSector.length"><h3><span class="label label-danger">Fail</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInPostcodeSector.length === 0"><h3><span class="label label-success">Pass</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInPostcodeSector.length"><pre>{{nameCheckResponse.data.nameChecks.identicalSoundingNameInPostcodeSector | json}}</pre></td>
					<td ng-show="nameCheckResponse.data.nameChecks.identicalSoundingNameInPostcodeSector.length === 0"></td>
				</tr>
				<tr>
					<td>Profanity Detection</td>
					<td ng-show="nameCheckResponse.data.nameChecks.profanityDetected===true"><h3><span class="label label-warning">Warning</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.profanityDetected===false"><h3><span class="label label-success">Pass</span></h3></td>
					<td ng-show="nameCheckResponse.data.nameChecks.profanityDetected===true"><p>Possible profanity detected - consider if name might be easily vandalised.</p></td>
					<td ng-show="nameCheckResponse.data.nameChecks.profanityDetected===false"></td>
				</tr>
			</table>
		</div>
      </div>
	  
      <!--show summary and submit house name change request-->
      <!--TODO add if name has been checked and is acceptable-->
	  <!-- hide submit button for test -->
      <!-- <div ng-show="hasNewHouseNameBeenChecked === true">
        <h3>Summary before submit</h3>
        <p>Please check the following details are what you are requesting. Then hit submit and we will process the change.</p>
        <form ng-submit="submitHouseNameChangeRequest()">
          <div class="form-group">
            <div class="input-group">
              <p ng-repeat="x in selectedAddress.data">Current Address: {{x.uprn}} | {{x.property}} | {{x.street}}</p>
              <p>New Address: {{newHouseName}}</p>
              <span class="input-group-btn">
                <button type="submit" class="btn btn-primary">Submit Request</button>
              </span>
            </div>
          </div>
        </form>
        
      </div> -->

    </div> 
    <!--end angular app-->
    
	</div> <!-- section -->
	</div> <!-- container -->
	</main>
	
<script src="<%= process.env.iisnodeRoute %>/public/src/js/nameCheckerApp.js"></script>

	<footer class="footer">
		<!-- < % include ../partials/footer % > -->
		<% include ../partials/footer_WebSiteStyle %>
	</footer>
    
</body>
</html>